<link rel="import" href="../../vendor/polymer/polymer.html">

<link rel="import" href="../../vendor/iron-ajax/iron-ajax.html">
<link rel="import" href="../../vendor/iron-list/iron-list.html">
<link rel="import" href="../../vendor/iron-icons/iron-icons.html">

<link rel="import" href="../../vendor/paper-input/paper-input.html">
<link rel="import" href="../../vendor/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../app-data/app-data.html">

<link rel="import" href="bde-base-item.html">
<!--
A BDE custom element, which gets the 'Cubbles-Components' from the Base via AJAX.
The response is a list of items with the description attribute on display.

The list is rendered by repeating the bde-base-item.

Example:

    <bde-base-browser
        selected="{{selected}}"
        compounds-only>
    </bde-base-browser>

@group BDE Custom Elements
@element bde-base-browser
@demo ../elements/bde-base-browser/demo/index.html
-->
<dom-module id="bde-base-browser">
    <style>
        :host {
            display: block;
        }

        #clearBtn {
            color: var(--paper-grey-600);
            width: 23px; /* 15px + 2*4px for padding */
            height: 23px;
            padding: 0px 4px;
        }

        iron-list {
            @apply(--layout-flex);
        }

        :host #list {
            border: 1px solid #e5e5e5;
        }
    </style>

    <template>

        <!--<app-data key="settings" data="{{settings}}"></app-data>-->

        <iron-ajax id="ajax"
                   auto
                   handle-as="json"
                   on-response="handleResponse"
                   auto
        ></iron-ajax>
                   <!--url="[[_computeBaseUrl(settings.baseUrl, settings.store)]]"-->

        <paper-input id="search"
                     label="Search components in the base..."
                     value="{{searchTerm}}"
                     on-input="handleInput"
                     autofocus>
            <iron-icon icon="icons:search" prefix></iron-icon>
            <paper-icon-button id="clearBtn"
                               icon="icons:clear"
                               title="clear search"
                               on-tap="clearInput"
                               suffix
            ></paper-icon-button>
        </paper-input>

        <iron-list id="list"
                   items="[[_filtered]]"
                   multi-selection
                   hidden="[[!_filtered.length]]">
            <template>
                <bde-base-item item="{{item}}" settings="[[settings]]"></bde-base-item>
            </template>
        </iron-list>
    </template>
    <script src="bde-base-browser.js"></script>
</dom-module>
