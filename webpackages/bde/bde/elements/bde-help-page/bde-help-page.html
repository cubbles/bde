<!-- (ene) TODO: i18n  -> app-localize-behavior -->
<!-- (ene) TODO: use iron-localstorage on property instead of using it directly -->

<link rel="import" href="../../vendor/polymer/polymer.html">
<link rel="import" href="../../vendor/iron-pages/iron-pages.html">
<link rel="import" href="../../vendor/iron-selector/iron-selector.html">
<link rel="import" href="../../vendor/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../../vendor/paper-dialog/paper-dialog.html">
<link rel="import" href="../../vendor/neon-animation/animations/fade-out-animation.html">

<!--
A page dialog component used for documentation and tutorials.

On first start of the app, the dialog is shown, to inform the user about the features of the BDE.

On localstorage a value is set, to indicate, that the app was already opened, so the dialog would be prevented from opening on every start-up.

Example:

    <bde-help-page></bde-help-page>

@group BDE Custom Elements
@hero hero.svg
@element bde-help-page
-->

<dom-module id="bde-help-page">
  <template>
    <style>
      :host {
        display: block;
      }

      #paginator {
        @apply(--layout-horizontal);
        justify-content: center;
      }

      .dot {
        background-color: var(--paper-cyan-600);
        width: 12px;
        height: 12px;
        border-radius: 6px;
        cursor: pointer;
        margin: 5px;
        z-index: 100;
      }

      .dot.iron-selected {
        background-color: var(--accent-color);
      }

      paper-dialog {
        /*min-width: 200px;*/
        /*min-height: 150px;*/
        @apply(--layout-vertical);
      }

      li {
        margin: 5px;
      }

    </style>

    <paper-dialog id="dialog" opened="{{opened}}" exit-animation="fade-out-animation" with-backdrop>

      <h2>Quick Tips</h2>

          <iron-pages selected="{{_selectedHelpPage}}">
            <div>
              <p>
                Welcome to Cubbles <i>B</i>rowser based <i>D</i>evelopment <i>E</i>nvironment!
              </p>
              <p>
                You can use the BDE to compose Cubble components and compounds to build running applications.
              </p>
              <!-- (ene) TODO  explain basic structure; underline with graphical representation -->
                <li> On the left you can explore the components in the project, in the center you can compose the components, on the right (in a sidebar) you can modify the components in the project.</li>
                <li>The <b>Webpackage</b> represents the current project. It can contain <i>applications</i>, <i>compounds</i>, <i>elementaries</i>, <i>utilities</i>.</li>
                <li><b>Compounds</b> contain <i>member</i>, which are also Cubble components.</li>
                <li>You can load compounds from the base via <paper-icon-button icon="icons:cloud-download"></paper-icon-button> in the upper left toolbar.</li>
                <li>You can add members to a compound via <paper-icon-button icon="icons:add"></paper-icon-button> in the lower right corner. The Cubble Components are loaded from the base.</li>
            </div>
            <div>
              <p>
                Starting a new project:
              </p>
                <li>After the BDE application is loaded, a new webpackage is default. You can also create a new project by clicking <paper-icon-button icon="editor:insert-drive-file"></paper-icon-button> ion the upper left toolbar.</li>
                <li>You can edit the metadata of the current project by clicking the <paper-icon-button icon="icons:settings"></paper-icon-button> right beside the name in the left sidebar.</li>
                <li>Set general the author information of the current project (Name and Email).</li>
                <li><b>Add Cubble components</b> from the base via <paper-icon-button icon="add"></paper-icon-button> in the lower right corner.</li>
                <li>Now the components can be modified visually to create new Cubble components.</li>
            </div>
            <div>
              <p>
                Visual Manipulation of Cubble components:
              </p>
                <li>Components can be arranged with the cursor (drag-and-drop).</li>
                <li>Connections between components can be established by <b>click-and-hold</b> on the slots of the respective components.</li>
                <li>Alternatively call a context menu via <b>right mouse button</b>.</li>
                <li>Via <b>mouse-wheel</b> the zoom-level can be changed.</li>
              <p>Highlighting and automatic arrangement:</p>
                <li>Centering all components via <paper-icon-button icon="icons:aspect-ratio"></paper-icon-button>.</li>
                <li>Arrange all components and connections automatically by pressing <paper-icon-button icon="bde:magic-wand"></paper-icon-button>.</li>
            </div>
            <div>
              <p>
                Views in a BDE project:
                In the upper right in the toolbar you find the buttons for changing the current view in the BDE project window:
              </p>
                <li><paper-icon-button icon="icons:gesture"></paper-icon-button> (Default on start of the BDE): <b>dataflow-view</b> for manipulation of components, connections, initial-values, etc. </li>
                <li><paper-icon-button icon="icons:open-with"></paper-icon-button>: <b>design-view</b> for the arrangement of components on application level.</li>
                <li><paper-icon-button icon="icons:apps"></paper-icon-button>: <b>application-view</b> for displaying a runnable version of the created webpackage in the BDE.</li>
            </div>

            <!-- (ene) TODO: is it desired, that there is an iron-component-page based documentation of the BDE elements available ? -->

            <!-- <div>
              <p>
                Developer documentation
              </p>
                <div>
                  The BDE API documentation can be found here:
                </div>
                  <li><a href="/test/documentation.html">documentation</a></li>
            </div> -->
          </iron-pages>

      <iron-selector id="paginator" selected = "{{_selectedHelpPage}}">
        <div class = "dot"></div>
        <div class = "dot"></div>
        <div class = "dot"></div>
        <div class = "dot"></div>
        <!-- <div class = "dot"></div> -->
      </iron-selector>

      <div class="buttons">
        <paper-button dialog-confirm>Close</paper-button>
      </div>

    </paper-dialog>

    <!-- <iron-local-storage name = "start-up-Tutorial"
                        value = "{{startupTutorial}}"
                        on-iron-localstorage-load-empty="initStartupTutorial">
    </iron-local-storage> -->

  </template>

  <script>
    Polymer({
      is: 'bde-help-page',

      properties: {

        /**
         * Opened Binding, to be accessed from the app
         * @type {Boolean}
         * @property {opened}
         */
        opened: {
          type: Boolean,
          value: false
        },

        /**
         * Init value for the selected help page
         * @type {Number}
         * @property {_selectedHelpPage}
         */
        _selectedHelpPage: {
          type: Number,
          value: 0
        },

        // startupTutorial : {
        //   type: String
        // }


      // initStartupTutorial : function () {
      //     this.startupTutorial = 'done';
      // },

    },
      /**
       * Polymer attached function. Sets the 'startupTutorial' value on app-start, otherwise checks if the value is set.
       */
      attached: function() {

        // if (this.startupTutorial == 'done') {
        //   return;
        // }
        // else {
        //   this.opened = true;
        // }

        if (localStorage.getItem('startupTutorial') == 'done') {
          return;
        } else {
          this.opened = true;
          localStorage.setItem('startupTutorial', 'done')
        }
      },
    });
  </script>
</dom-module>
