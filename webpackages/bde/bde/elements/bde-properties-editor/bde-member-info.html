<link rel="import" href="../../vendor/polymer/polymer.html">
<link rel="import" href="../../vendor/iron-icons/iron-icons.html">
<link rel="import" href="bde-slot-info.html">
<link rel="import" href="bde-member-edit-dialog.html" />

<dom-module id="bde-member-info">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <bde-member-edit-dialog id="bdeMemberDialog" artifact="[[artifact]]" member="{{member}}" dialog-opened="{{memberDialogOpened}}"></bde-member-edit-dialog>

    <h2>[[_memberName]] <paper-icon-button icon="icons:settings" active="{{memberDialogOpened}}" toggles></paper-icon-button></h2>

    <p contenteditable="true" on-input="onDescriptionChange">[[member.description]]</p>

    <div class="listbox" hidden$="[[!_hasSlots(member)]]">
      <template is="dom-repeat" items="[[member.metadata.slots]]" filter="_filterInslots" as="slot">
        <bde-slot-info slot="{{slot}}" direction="input" artifact="[[artifact]]" member-id="[[member.memberId]]" on-change="onInSlotChange"></bde-slot-info>
      </template>

      <template is="dom-repeat" items="[[member.metadata.slots]]" filter="_filterOutslots" as="slot">
        <bde-slot-info slot="{{slot}}" direction="output" on-change="onOutSlotChange"></bde-slot-info>
      </template>
    </div>

  </template>
  <script src="bde-member-info.js"></script>
</dom-module>
